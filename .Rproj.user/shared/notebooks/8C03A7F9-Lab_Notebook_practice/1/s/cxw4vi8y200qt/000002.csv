"0","# We create a table of the players in each of the matches"
"0",""
"0","train_players <- t(features$players)"
"0","train_players <- data.frame(winner_id=train_players[,1],loser_id=train_players[,2])"
"0",""
"0","# And we pass this into our predict winner function, which returns the Bradley-Terry probabilities."
"0",""
"0","BTprob <- predict_winner(train_players,lambda_hat,reduced_players)"
"0",""
"0","# We then attach this to the feature matrix."
"0",""
"0","winner <- feature_matrix[length(feature_matrix[,1]),]"
"0","feature_matrix_BT <- feature_matrix[-length(feature_matrix[,1]),]"
"0","feature_matrix_BT <- rbind(feature_matrix_BT,BTprob,winner)"
"0",""
"0","# We then repeat these steps to the test matrix."
"0",""
"0","test_players <- t(feature_matrix_test(my_data)$players)"
"0","test_players <- data.frame(winner_id=test_players[,1],loser_id=test_players[,2])"
"0",""
"0",""
"0","BTprob_test <- predict_winner(test_players,lambda_hat,reduced_players)"
"0","test_matrix_BT <- rbind(test_matrix$matrix,BTprob_test)"
"0",""
